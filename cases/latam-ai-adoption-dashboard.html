<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Adoption Pipeline | Data Engineering Portfolio</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            /* LATAM Airlines Inspired Palette */
            --latam-navy: #0B1535;   /* Fondo principal oscuro */
            --latam-blue: #1B0088;   /* Azul Corporativo Intenso */
            --latam-red: #E8114B;    /* Rojo/Coral Corporativo para acentos */
            --latam-light: #F5F7FA;
            --text-main: #ffffff;
            --text-muted: #a0aec0;
            --card-bg: rgba(27, 0, 136, 0.15); /* Azul translúcido */
            --border-color: rgba(255, 255, 255, 0.1);
        }

        body {
            font-family: 'Lato', sans-serif;
            background-color: var(--latam-navy);
            color: var(--text-main);
            margin: 0;
            line-height: 1.6;
        }

        /* --- NAVIGATION --- */
        .nav-bar {
            padding: 20px 40px;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid var(--border-color);
            background: rgba(11, 21, 53, 0.95); backdrop-filter: blur(10px);
            position: fixed; width: 100%; top: 0; z-index: 100; box-sizing: border-box;
        }
        .back-link {
            text-decoration: none; color: var(--text-muted); font-size: 0.9rem;
            display: flex; align-items: center; gap: 8px; transition: 0.3s;
        }
        .back-link:hover { color: var(--latam-red); transform: translateX(-5px); }

        /* --- HERO SECTION --- */
        .hero {
            padding: 140px 20px 60px;
            max-width: 1000px; margin: 0 auto; text-align: center;
            background: radial-gradient(circle at center, rgba(27, 0, 136, 0.25) 0%, transparent 70%);
        }
        .hero h1 {
            font-size: 3rem; font-weight: 900; margin-bottom: 20px; letter-spacing: -0.5px;
            background: linear-gradient(to right, #fff, #cbd5e0);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .hero-badge {
            display:inline-block; padding: 5px 15px; 
            background: rgba(232, 17, 75, 0.1); border: 1px solid var(--latam-red);
            border-radius:20px; color: var(--latam-red); font-size:0.75rem; font-weight:700; margin-bottom:20px; letter-spacing: 1px;
        }

        .meta-grid {
            display: flex; justify-content: center; gap: 40px; margin-top: 40px; flex-wrap: wrap;
            border-top: 1px solid var(--border-color); padding-top: 30px;
        }
        .meta-item { text-align: left; }
        .meta-label { font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; display: block; margin-bottom: 5px; }
        .meta-value { font-size: 1rem; font-weight: 600; color: white; }

        /* --- CONTENT CONTAINER --- */
        .container { max-width: 950px; margin: 0 auto; padding: 0 20px 100px; }
        
        .section-block { margin-bottom: 80px; opacity: 0; transform: translateY(20px); animation: fadeUp 0.8s forwards; }
        @keyframes fadeUp { to { opacity: 1; transform: translateY(0); } }

        h2 { font-size: 1.8rem; margin-bottom: 30px; border-left: 4px solid var(--latam-red); padding-left: 20px; color: white; }
        p { color: #cbd5e1; font-size: 1.1rem; margin-bottom: 20px; }

        /* --- ARCHITECTURE DIAGRAM (Dataform Style) --- */
        .arch-diagram {
            display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 40px;
        }
        .folder-structure {
            background: #0f1221; border: 1px solid var(--border-color);
            border-radius: 12px; padding: 20px; font-family: 'Fira Code', monospace; font-size: 0.85rem;
            color: #a0aec0;
        }
        .folder-tree ul { list-style: none; padding-left: 20px; margin: 0; }
        .folder-tree li { margin-bottom: 5px; position: relative; }
        .folder-tree i { margin-right: 8px; }
        .folder-highlight { color: var(--latam-red); font-weight: bold; }
        .file-sqlx { color: #4fd1c5; }
        
        .arch-desc {
            display: flex; flex-direction: column; justify-content: center;
        }

        /* --- DASHBOARD MOCKUP --- */
        .dashboard-mockup {
            background: #151a30; border: 1px solid var(--border-color);
            border-radius: 16px; padding: 30px; margin: 40px 0;
            box-shadow: 0 20px 50px rgba(0,0,0,0.4);
        }
        .dash-header { display: flex; justify-content: space-between; margin-bottom: 30px; border-bottom: 1px solid var(--border-color); padding-bottom: 15px; }
        .dash-title { font-weight: 700; color: white; text-transform: uppercase; letter-spacing: 1px; }

        .kpi-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 30px; }
        .kpi-card { background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px; text-align: center; border-top: 3px solid var(--latam-blue); }
        .kpi-card.accent { border-top: 3px solid var(--latam-red); }
        .kpi-val { font-size: 1.6rem; font-weight: 800; color: white; display: block; margin-bottom: 5px; }
        .kpi-lbl { font-size: 0.75rem; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.5px;}

        /* BARS */
        .chart-row { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; }
        .chart-box { background: rgba(0,0,0,0.2); padding: 20px; border-radius: 12px; }
        .bar-group { margin-bottom: 15px; }
        .bar-label { display: flex; justify-content: space-between; font-size: 0.8rem; color: #cbd5e1; margin-bottom: 5px; }
        .bar-track { background: rgba(255,255,255,0.1); height: 6px; border-radius: 4px; overflow: hidden; }
        .bar-fill { height: 100%; border-radius: 4px; background: var(--latam-blue); }
        .bar-fill.red { background: var(--latam-red); }

        /* --- CODE SNIPPET --- */
        .code-block {
            background: #0f1221; border-radius: 12px; padding: 20px;
            border: 1px solid var(--border-color); font-family: 'Fira Code', monospace;
            font-size: 0.85rem; color: #e2e8f0; overflow-x: auto; margin-top: 20px;
        }
        .kw { color: #E8114B; } .func { color: #63b3ed; } .str { color: #68d391; } .com { color: #5c6370; }

    </style>
</head>
<body>

    <nav class="nav-bar">
        <a href="../index.html#projects" class="back-link">
            <i class="fa-solid fa-arrow-left"></i> Back to Portfolio
        </a>
        <div style="font-weight: 700; color: white; letter-spacing: 1px;">JAVIER MORAGA / DATA ENGINEER</div>
    </nav>

    <header class="hero">
        <span class="hero-badge">GCP DATA ENGINEERING</span>
        <h1>AI Assistant "Amelia" Pipeline</h1>
        <p>End-to-End Data Engineering: From raw conversational logs to strategic insights for Executive Leadership.</p>
        
        <div class="meta-grid">
            <div class="meta-item">
                <span class="meta-label">Core Tech</span>
                <span class="meta-value">Dataform (SQLX)</span>
            </div>
            <div class="meta-item">
                <span class="meta-label">Warehouse</span>
                <span class="meta-value">Google BigQuery</span>
            </div>
            <div class="meta-item">
                <span class="meta-label">Role</span>
                <span class="meta-value">Analytics Engineer</span>
            </div>
            <div class="meta-item">
                <span class="meta-label">Output</span>
                <span class="meta-value">Executive Dashboard</span>
            </div>
        </div>
    </header>

    <div class="container">

        <div class="section-block">
            <h2>The Challenge: Measuring AI Adoption</h2>
            <p>
                The company launched "Amelia", an internal GenAI assistant designed to optimize HR and Operational queries. 
                However, the raw data existed in fragmented logs: 
                <strong>Google Analytics 4 (GA4) events</strong>, <strong>Backend logs</strong>, and <strong>User feedback forms</strong>.
            </p>
            <p>
                <strong>The Goal:</strong> Build a robust, automated pipeline to transform unstructured logs into a "Gold Layer" dataset 
                that powers a dashboard for the VP of Technology and HR Directors, answering: 
                <em>"Are employees actually adopting the AI? Or are they reverting to human support?"</em>
            </p>
        </div>

        <div class="section-block">
            <h2>The Engineering Solution (Dataform on GCP)</h2>
            <p>
                I implemented a modern transformation layer using <strong>Dataform</strong>. Instead of massive, unmanageable SQL scripts, 
                I modularized the logic into <code>.sqlx</code> files, ensuring version control (Git) and dependency management.
            </p>

            <div class="arch-diagram">
                <div class="folder-structure">
                    <div style="margin-bottom:10px; color:white; font-weight:bold;">// Project Structure: rhplus-dataform</div>
                    <ul class="folder-tree">
                        <li><i class="fa-regular fa-folder-open folder-highlight"></i> definitions
                            <ul>
                                <li><i class="fa-regular fa-folder-open"></i> sources
                                    <ul>
                                        <li><i class="fa-regular fa-file-code"></i> automated_questions.sqlx</li>
                                        <li><i class="fa-regular fa-file-code"></i> logging_topic.sqlx</li>
                                    </ul>
                                </li>
                                <li><i class="fa-regular fa-folder-open folder-highlight"></i> reporting
                                    <ul>
                                        <li><i class="fa-solid fa-file-code file-sqlx"></i> conversation_statistics.sqlx</li>
                                        <li><i class="fa-solid fa-file-code file-sqlx"></i> ga4_device.sqlx</li>
                                        <li><i class="fa-solid fa-file-code file-sqlx"></i> ga4_geo.sqlx</li>
                                        <li><i class="fa-solid fa-file-code file-sqlx"></i> interactions_feedback.sqlx</li>
                                        <li><i class="fa-solid fa-file-code file-sqlx"></i> cohort_statistics.sqlx</li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li><i class="fa-regular fa-folder"></i> includes
                            <ul>
                                <li><i class="fa-brands fa-js"></i> constants.js</li>
                            </ul>
                        </li>
                        <li><i class="fa-brands fa-npm"></i> package.json</li>
                    </ul>
                </div>

                <div class="arch-desc">
                    <p style="font-size:0.95rem;">
                        <strong style="color:white;">1. Raw Ingestion:</strong> Data arrives in BigQuery tables (`logging_topic`, `automated_questions`).
                    </p>
                    <p style="font-size:0.95rem;">
                        <strong style="color:white;">2. Materialization:</strong> Dataform compiles SQLX files into incremental tables or views.
                        Logic includes sessionizing GA4 events and joining them with backend conversation IDs.
                    </p>
                    <p style="font-size:0.95rem;">
                        <strong style="color:white;">3. Quality Checks:</strong> Automated assertions in Dataform to prevent duplicates in `conversation_id`.
                    </p>
                </div>
            </div>

            <div class="code-block">
<pre>
<span class="com">// definitions/reporting/conversation_statistics.sqlx</span>
config {
  type: <span class="str">"incremental"</span>,
  schema: <span class="str">"reporting_amelia"</span>,
  tags: [<span class="str">"daily_update"</span>],
  uniqueKey: [<span class="str">"conversation_id"</span>]
}

<span class="kw">SELECT</span>
  t1.conversation_id,
  t1.user_role,  <span class="com">-- e.g., Pilot, Cabin Crew, Executive</span>
  t1.vp_division,
  <span class="kw">COUNT</span>(t2.interaction_id) <span class="kw">AS</span> total_turns,
  <span class="kw">SUM</span>(<span class="kw">CASE WHEN</span> t2.source = <span class="str">'AI'</span> <span class="kw">THEN</span> 1 <span class="kw">ELSE</span> 0 <span class="kw">END</span>) <span class="kw">AS</span> ai_responses,
  t3.csat_score
<span class="kw">FROM</span> ${ref(<span class="str">"logging_topic"</span>)} t1
<span class="kw">LEFT JOIN</span> ${ref(<span class="str">"automated_questions"</span>)} t2 
  <span class="kw">ON</span> t1.conversation_id = t2.conversation_id
<span class="kw">WHERE</span> t1.timestamp > <span class="kw">timestamp_sub</span>(current_timestamp(), interval 1 day)
<span class="kw">GROUP BY</span> 1, 2, 3
</pre>
            </div>
        </div>

        <div class="section-block">
            <h2>The Output: Executive Adoption Dashboard</h2>
            <p>
                The cleaned data feeds a high-level dashboard. This provides the "Mesa Ejecutiva" with a clear picture of ROI and adoption barriers.
            </p>
            
            <div class="dashboard-mockup">
                <div class="dash-header">
                    <span class="dash-title">Amelia - General Overview (Q2)</span>
                    <span style="color: var(--latam-red); font-family: 'Fira Code';">LIVE DATA</span>
                </div>

                <div class="kpi-row">
                    <div class="kpi-card accent">
                        <span class="kpi-lbl">Monthly Active Users</span>
                        <span class="kpi-val">+20,000</span>
                        <span style="font-size:0.75rem; color:#10b981;">▲ 15% MoM</span>
                    </div>
                    <div class="kpi-card">
                        <span class="kpi-lbl">CSAT Score</span>
                        <span class="kpi-val">4.2 / 5.0</span>
                        <span style="font-size:0.75rem; color:#cbd5e1;">Target: 4.0</span>
                    </div>
                    <div class="kpi-card">
                        <span class="kpi-lbl">Avg Interactions</span>
                        <span class="kpi-val">5.8</span>
                        <span style="font-size:0.75rem; color:#cbd5e1;">Turns per user</span>
                    </div>
                    <div class="kpi-card">
                        <span class="kpi-lbl">Adoption Rate</span>
                        <span class="kpi-val">68%</span>
                        <span style="font-size:0.75rem; color:#10b981;">▲ vs Target</span>
                    </div>
                </div>

                <div class="chart-row">
                    <div class="chart-box">
                        <h4 style="color:white; margin:0 0 15px 0; font-size:0.85rem; text-transform: uppercase;">Adoption by Division (VP Level)</h4>
                        
                        <div class="bar-group">
                            <div class="bar-label"><span>VP Human Resources</span> <span>92% Adopted</span></div>
                            <div class="bar-track"><div class="bar-fill" style="width: 92%;"></div></div>
                        </div>
                        <div class="bar-group">
                            <div class="bar-label"><span>VP Operations</span> <span>84% Adopted</span></div>
                            <div class="bar-track"><div class="bar-fill" style="width: 84%;"></div></div>
                        </div>
                        <div class="bar-group">
                            <div class="bar-label"><span>VP Commercial</span> <span>65% Adopted</span></div>
                            <div class="bar-track"><div class="bar-fill red" style="width: 65%;"></div></div>
                        </div>
                        <div class="bar-group">
                            <div class="bar-label"><span>VP Maintenance</span> <span>58% Adopted</span></div>
                            <div class="bar-track"><div class="bar-fill red" style="width: 58%;"></div></div>
                        </div>
                    </div>

                    <div class="chart-box" style="display:flex; flex-direction:column; justify-content:center; text-align:center;">
                        <h4 style="color:white; margin:0 0 15px 0; font-size:0.85rem; text-transform: uppercase;">Topic Distribution</h4>
                        <div style="width:120px; height:120px; border-radius:50%; background: conic-gradient(var(--latam-blue) 0% 50%, var(--latam-red) 50% 75%, #4fd1c5 75% 100%); margin:0 auto 15px;"></div>
                        <div style="font-size:0.75rem; color:#cbd5e1;">
                            <span style="color:var(--latam-blue)">●</span> HR Queries (50%)<br>
                            <span style="color:var(--latam-red)">●</span> IT Support (25%)<br>
                            <span style="color:#4fd1c5">●</span> Operational (25%)
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div style="text-align:center; margin-top:80px; border-top:1px solid var(--border-color); padding-top:40px;">
            <p style="color:#94a3b8; font-size:0.9rem;">
                *Metrics shown are illustrative approximations to protect business confidentiality.
            </p>
            <a href="../index.html#contact" style="display:inline-block; padding:15px 30px; background:transparent; border: 2px solid var(--latam-red); color:white; border-radius:30px; font-weight:700; text-decoration:none; transition:0.3s;">
                Contact for Full Demo
            </a>
        </div>

    </div>

</body>
</html>
