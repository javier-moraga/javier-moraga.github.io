<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <link href="https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Roboto+Mono&display=swap" rel="stylesheet">
    <style>
        /* Ajuste de colores basado en tu index.html */
        :root { 
            --wom-magenta: #E6007E; 
            --wom-cyan: #3b82f6; /* Accent blue de tu index */
            --bg-deep: #0b1120; /* Color exacto del fondo de tu index */
        }

        * { margin: 0; padding: 0; box-sizing: border-box; overflow: hidden; }

        body { 
            background: var(--bg-deep);
            height: 100vh; 
            display: flex; 
            justify-content: center; 
            align-items: center;
        }

        .radar-screen {
            position: relative;
            /* Tamaño adaptativo para el contenedor del portafolio */
            width: 85vh; 
            height: 85vh;
            max-width: 320px;
            max-height: 320px;
            border: 1px solid rgba(230, 0, 126, 0.3);
            border-radius: 50%;
            /* Rejilla técnica sutil */
            background: 
                repeating-radial-gradient(circle, transparent 0, transparent 40px, rgba(230, 0, 126, 0.05) 40px, rgba(230, 0, 126, 0.05) 41px),
                linear-gradient(to top, transparent 49.5%, rgba(230, 0, 126, 0.1) 50%, transparent 50.5%),
                linear-gradient(to right, transparent 49.5%, rgba(230, 0, 126, 0.1) 50%, transparent 50.5%);
        }

        .radar-sweep {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: conic-gradient(from 0deg, rgba(230, 0, 126, 0.35) 0deg, transparent 90deg);
            border-radius: 50%;
            animation: sweep 4s linear infinite;
        }

        .target {
            position: absolute; width: 8px; height: 8px;
            background: var(--wom-cyan);
            box-shadow: 0 0 15px var(--wom-cyan);
            border-radius: 50%;
            animation: blink 0.8s infinite alternate;
        }

        .central-text {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            text-align: center;
            background: rgba(11, 17, 32, 0.8);
            padding: 10px;
            border-radius: 4px;
            width: 80%;
            pointer-events: none;
        }

        h1 { font-family: 'Black Ops One', cursive; color: #fff; font-size: 1.1rem; letter-spacing: 1px; margin: 2px 0; }
        .alert { font-family: 'Roboto Mono', monospace; color: var(--wom-magenta); font-size: 0.6rem; font-weight: 800; letter-spacing: 1px; animation: flash 1s infinite; }
        .sub { font-family: 'Roboto Mono', monospace; color: #64748b; font-size: 0.5rem; text-transform: uppercase; }

        @keyframes sweep { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes blink { 50% { opacity: 0.2; transform: scale(0.8); } }
        @keyframes flash { 50% { opacity: 0.4; } }
    </style>
</head>
<body>
    <div class="radar-screen">
        <div class="radar-sweep"></div>
        <div class="target" style="top: 25%; left: 30%;"></div>
        <div class="target" style="top: 60%; left: 75%;"></div>
        <div class="target" style="top: 15%; left: 65%;"></div>
        
        <div class="central-text">
            <div class="alert">⚠️ CHURN THREAT</div>
            <h1>DATA DEFENSE</h1>
            <div class="sub">Mitigating Impact • May 2022</div>
        </div>
    </div>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        // 1. Capturar los parámetros con los que llegamos a esta página
        const params = new URLSearchParams(window.location.search);
        
        const mode = params.get('v');       // ej: global
        const country = params.get('pais'); // ej: cl
        const lang = params.get('lang');    // ej: es, en

        // 2. Referencia al botón de volver (asegúrate que tu <a> tenga id="btn-back")
        const backBtn = document.getElementById('btn-back');
        
        // Si no usaste ID, intentamos buscar cualquier link que vaya al index
        const fallbackBtn = document.querySelector('a[href*="index.html"]');
        const targetBtn = backBtn || fallbackBtn;

        if (targetBtn) {
            // 3. Construir la URL de regreso preservando el estado
            let returnUrl = "../index.html?";
            
            // Solo agregamos los parámetros si existen
            if (mode) returnUrl += `v=${mode}&`;
            if (country) returnUrl += `pais=${country}&`;
            
            // Para el idioma, usamos 'initialLang' para que el index lo fuerce al cargar
            if (lang) returnUrl += `initialLang=${lang}`;

            // 4. Asignar la nueva URL al botón
            targetBtn.href = returnUrl;
            
            console.log("Link de retorno configurado a:", returnUrl);
        }

        // OPCIONAL: Si quieres ocultar contenido en inglés/español dentro del caso
        // Puedes usar clases CSS como .lang-es o .lang-en
        if (lang === 'es') {
            document.body.classList.add('is-spanish');
        } else {
            document.body.classList.add('is-english');
        }
    });
</script>
</body>
</html>